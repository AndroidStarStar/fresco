***************
*** 27,34 ****
              minifyEnabled true
              proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-showcase.pro'
          }
      }
  
      flavorDimensions "main"
      productFlavors {
          main {
--- 27,47 ----
              minifyEnabled true
              proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-showcase.pro'
          }
+         debug {
+             minifyEnabled false
+         }
+         instrumentation {
+             initWith debug
+             minifyEnabled true
+             proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-showcase.pro'
+             testProguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-showcase.pro', 'proguard-test.pro'
+             matchingFallbacks = ['debug']
+         }
      }
  
+     testBuildType "instrumentation"
+ 
+ 
      flavorDimensions "main"
      productFlavors {
          main {
***************
*** 37,51 ****
              dimension "main"
              minSdkVersion 21
          }
- 
          internal {
-             buildTypes {
-                 debug {
-                     minifyEnabled true
-                     proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-showcase.pro'
-                     testProguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-showcase.pro', 'proguard-test.pro'
-                 }
-             }
          }
      }
  
--- 50,56 ----
              dimension "main"
              minSdkVersion 21
          }
          internal {
          }
      }
  
